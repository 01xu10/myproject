# !/usr/bin/env python
# -*- coding: utf-8 -*-
# ------------------------------
# @project : Py_Project
# @File    : baidu_translate_V2.0.py
# @Software: PyCharm
# @Author  : Xu
# @Time    : 2021/4/22 13:29
# ------------------------------

"""
js请球参数解析
"""
from requests_html import HTMLSession
from fake_useragent import UserAgent
import re, js2py
ua = UserAgent()
session = HTMLSession()


# start_url = 'https://fanyi.baidu.com/v2transapi?from=zh&to=en'
# start_url = 'https://fanyi.baidu.com/v2transapi?from=en&to=zh'

# https://fanyi.baidu.com/langdetect


class BaiDuSpider(object):

    def __init__(self):
        self.start_url = 'https://fanyi.baidu.com/v2transapi'
        self.lan_url = 'https://fanyi.baidu.com/langdetect'
        self.input_str = input('请输入需要翻译的内容(例：あなたのことが好きです)：')

    def parse_lan_url_response(self):
        """
        解析用户输入的语言的种类
        :return:
        """
        headers = {
            'Cookie': 'REALTIME_TRANS_SWITCH=1; FANYI_WORD_SWITCH=1; HISTORY_SWITCH=1; SOUND_PREFER_SWITCH=1; SOUND_SPD_SWITCH=1; Hm_lvt_afd111fa62852d1f37001d1f980b6800=1599288033; BIDUPSID=94ED73D41A60F5410218DED5F26813B1; PSTM=1609765617; BAIDUID=EF0BA3D46B46537F8F311C85A9C3139F:FG=1; H_WISE_SIDS=107314_110085_127969_131423_133332_144966_154214_156287_156927_162898_163568_164955_165134_165136_165329_166147_166184_166831_167069_167074_167085_167114_167295_168033_168205_168311_168388_168495_168541_168558_168565_168747_168762_168767_169132_169155_169164_169187_169217_169308_169310_169374_169661_169666_169708_169833_169873_170035_170074_170216_170252_170291_170451_170476; BDUSS=dvTm9mcEpqallQRjZPbTJmRk1lQmJqUVFaMlJqZ20yeEpZUGVBfklMdk1TM2xnRVFBQUFBJCQAAAAAAAAAAAEAAADB7szat~y12Na0t6i52QAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMy-UWDMvlFgMn; BDUSS_BFESS=dvTm9mcEpqallQRjZPbTJmRk1lQmJqUVFaMlJqZ20yeEpZUGVBfklMdk1TM2xnRVFBQUFBJCQAAAAAAAAAAAEAAADB7szat~y12Na0t6i52QAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMy-UWDMvlFgMn; __yjs_duid=1_95f905692b2840656f1f4ac42137ae721617966004006; MCITY=-158%3A; BDORZ=B490B5EBF6F3CD402E515D22BCDA1598; H_PS_PSSID=33821_31253_33848_33675_26350_33891_33811; BAIDUID_BFESS=EF0BA3D46B46537F8F311C85A9C3139F:FG=1; BCLID=6950050476890282943; BDSFRCVID=U8COJexroG38EYQeA5OHIGgggLweG7bTDYLEOwXPsp3LGJLVJeC6EG0Pts1-dEu-EHtdogKKLmOTHpKF_2uxOjjg8UtVJeC6EG0Ptf8g0M5; H_BDCLCKID_SF=tR-JoDDMJDL3qPTuKITaKDCShUFsW5JmB2Q-5KL-LJkaVhT_bfLh-l_PQUJMK-v8K6rBbxbdJJjoVfcaL4JfMp0Z2J5-5-5Qt2TxoUJvMInJhhvq-4PKjtCebPRiWPr9QgbjahQ7tt5W8ncFbT7l5hKpbt-q0x-jLTnhVn0M5DK0hDvI-tTBMDCV-frb-C62aKDsslvcBhcqJ-ovQT-WQqFubtLtW-5A3KvM0hR55l0bHxbeWfvpX-kIBp7thU5bQJRpaJ5nJq5nhMJmKTLVbML0qto7-P3y523i2n6vQpn2OpQ3DRoWXPIqbN7P-p5Z5mAqKl0MLPbtbb0xXj_0DjPVKgTa54cbb4o2WbCQQCnT8pcN2b5oQTJbQJrIKx_tB2bAKb3j5hRbeq06-lOUWfAkXpJvQnJjt2JxaqRCWJ5TMl5jDh3MKToDb-otexQ7bIny0hvcBn6cShnxyUjrDRLbXU6BK5vPbNcZ0l8K3l02V-bIe-t2XjQh-p52f6KDJJCD3D; BCLID_BFESS=6950050476890282943; BDSFRCVID_BFESS=U8COJexroG38EYQeA5OHIGgggLweG7bTDYLEOwXPsp3LGJLVJeC6EG0Pts1-dEu-EHtdogKKLmOTHpKF_2uxOjjg8UtVJeC6EG0Ptf8g0M5; H_BDCLCKID_SF_BFESS=tR-JoDDMJDL3qPTuKITaKDCShUFsW5JmB2Q-5KL-LJkaVhT_bfLh-l_PQUJMK-v8K6rBbxbdJJjoVfcaL4JfMp0Z2J5-5-5Qt2TxoUJvMInJhhvq-4PKjtCebPRiWPr9QgbjahQ7tt5W8ncFbT7l5hKpbt-q0x-jLTnhVn0M5DK0hDvI-tTBMDCV-frb-C62aKDsslvcBhcqJ-ovQT-WQqFubtLtW-5A3KvM0hR55l0bHxbeWfvpX-kIBp7thU5bQJRpaJ5nJq5nhMJmKTLVbML0qto7-P3y523i2n6vQpn2OpQ3DRoWXPIqbN7P-p5Z5mAqKl0MLPbtbb0xXj_0DjPVKgTa54cbb4o2WbCQQCnT8pcN2b5oQTJbQJrIKx_tB2bAKb3j5hRbeq06-lOUWfAkXpJvQnJjt2JxaqRCWJ5TMl5jDh3MKToDb-otexQ7bIny0hvcBn6cShnxyUjrDRLbXU6BK5vPbNcZ0l8K3l02V-bIe-t2XjQh-p52f6KDJJCD3D; Hm_lvt_64ecd82404c51e03dc91cb9e8c025574=1617967160,1617976923,1619008851,1619008856; Hm_lpvt_64ecd82404c51e03dc91cb9e8c025574=1619008856; ab_sr=1.0.0_OTc4ODhhNDZjMjAxMDI2MzIzYTAzZjkzMDM2NjkzMDgxNDU2ZWIwZDY4OGUyYzM2NTdmMzlmMTJkNmY2NmY0NDA4MzM1YzQyMmM5MTFlOGJhYzMxZjRhMjkyMzUxMjNk; __yjs_st=2_MGE3M2I5MGE3NzJjYzdmMTlkZjY1YjMzOGEyYWVmMzEwMzE4NTVjYzViZmI4ZGVlZWU3ODcxN2VlMmQzZDJkN2Q2ZTM5ZmJkNzYwZjFhNjNiY2I4NzNhNjk3NTNmNDUzZTk4N2M1MThiYjljMGZmYWI1YzNmYTk2NmM3NGFiYWNiOTlkMjdkMjdmODQ2Y2Y2YTFhYzVmYzRkOTdmNWJjZTZlMGM5YTE0YzU2NGVjNTVjMTBiMDBmYTljYTU3NWVkMzQxN2EzMjBkYWNlZDhhODMxOGUxNTVlZThlNDE2MTI4Y2Q0YzU0MjVmNjU3ZGI5ZGExODg0YjVmYThlYzAxMl83XzE3NDNkZjlj',
            'Host': 'fanyi.baidu.com',
            'Origin': 'https://fanyi.baidu.com',
            # 'Referer': https://fanyi.baidu.com/?aldtype=16047
            'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.128 Safari/537.36',
            'X-Requested-With': 'XMLHttpRequest'
        }
        data = {
            'query': self.input_str
        }
        response = session.post(self.lan_url, headers=headers, data=data).json()
        self.parse_start_url_response(response['lan'])

    def parse_token_response(self):
        """
        解析token
        :return:
        """
        headers = {
            'Cookie': 'REALTIME_TRANS_SWITCH=1; FANYI_WORD_SWITCH=1; HISTORY_SWITCH=1; SOUND_PREFER_SWITCH=1; SOUND_SPD_SWITCH=1; Hm_lvt_afd111fa62852d1f37001d1f980b6800=1599288033; BIDUPSID=94ED73D41A60F5410218DED5F26813B1; PSTM=1609765617; BAIDUID=EF0BA3D46B46537F8F311C85A9C3139F:FG=1; H_WISE_SIDS=107314_110085_127969_131423_133332_144966_154214_156287_156927_162898_163568_164955_165134_165136_165329_166147_166184_166831_167069_167074_167085_167114_167295_168033_168205_168311_168388_168495_168541_168558_168565_168747_168762_168767_169132_169155_169164_169187_169217_169308_169310_169374_169661_169666_169708_169833_169873_170035_170074_170216_170252_170291_170451_170476; BDUSS=dvTm9mcEpqallQRjZPbTJmRk1lQmJqUVFaMlJqZ20yeEpZUGVBfklMdk1TM2xnRVFBQUFBJCQAAAAAAAAAAAEAAADB7szat~y12Na0t6i52QAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMy-UWDMvlFgMn; BDUSS_BFESS=dvTm9mcEpqallQRjZPbTJmRk1lQmJqUVFaMlJqZ20yeEpZUGVBfklMdk1TM2xnRVFBQUFBJCQAAAAAAAAAAAEAAADB7szat~y12Na0t6i52QAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMy-UWDMvlFgMn; __yjs_duid=1_95f905692b2840656f1f4ac42137ae721617966004006; MCITY=-158%3A; BDORZ=B490B5EBF6F3CD402E515D22BCDA1598; H_PS_PSSID=33821_31253_33848_33675_26350_33891_33811; BAIDUID_BFESS=EF0BA3D46B46537F8F311C85A9C3139F:FG=1; delPer=0; PSINO=7; BA_HECTOR=25ak2005a52425a5oa1g8098q0r; BCLID=6563029989650910080; BDSFRCVID=QqtOJexroG38EYQeA2kVIGgggLweG7bTDYLEOwXPsp3LGJLVJeC6EG0Pts1-dEu-EHtdogKKLmOTHpKF_2uxOjjg8UtVJeC6EG0Ptf8g0M5; H_BDCLCKID_SF=tR-JoDDMJDL3qPTuKITaKDCShUFsW5JmB2Q-5KL-LJkaVhT_bfLh-l_PQUJMK-v8K6rBbxbdJJjoVfcaL4JfMp0Z2J5-5-5Qt2TxoUJvMInJhhvq-4PKjtCebPRiWPr9QgbjahQ7tt5W8ncFbT7l5hKpbt-q0x-jLTnhVn0M5DK0hDvI-tTBMDCV-frb-C62aKDsslvcBhcqJ-ovQT-WQqFubtLtW-5A3KvM0hR55l0bHxbeWfvpX-kIBp7thU5bQJRpaJ5nJq5nhMJmKTLVbML0qto7-P3y523i2n6vQpn2OpQ3DRoWXPIqbN7P-p5Z5mAqKl0MLPbtbb0xXj_0DjPVKgTa54cbb4o2WbCQQCnT8pcN2b5oQTJbQJrIKx_tB2bAKb3j5hRbeq06-lOUWfAkXpJvQnJjt2JxaqRCWJ5TMl5jDh3MKToDb-otexQ7bIny0hvcBn6cShnxyUjrDRLbXU6BK5vPbNcZ0l8K3l02V-bIe-t2XjQhDHRabK6aKC5bL6rJabC3ehReXU6q2bDeQN-O0lcI5mCt0f3Y3b3JepR6bftb-l0vWtv4WbbvLT7johRTWqR4OR5JjxonDh83KNLLKUQtHmT7LnbO5hvv8b6O3M72yUKmDloOW-TB5bbPLUQF5l8-sq0x0bOte-bQXH_EJ6na--oa3RTeb6rjDnCr0JQMXUI82h5y05tO3G5I0lD-2MQzsn3TbUvbbfbW-RORXx74B5vvbPOMthRnOlRKy4oTjxL1Db3Jb5_L5gTtsl5dbnboepvoX-cc3MkQyPjdJJQOBKQB0KnGbUQkeq8CQft20b0EeMtjW6LEK5r2SCKyJDDW3D; BCLID_BFESS=6563029989650910080; BDSFRCVID_BFESS=QqtOJexroG38EYQeA2kVIGgggLweG7bTDYLEOwXPsp3LGJLVJeC6EG0Pts1-dEu-EHtdogKKLmOTHpKF_2uxOjjg8UtVJeC6EG0Ptf8g0M5; H_BDCLCKID_SF_BFESS=tR-JoDDMJDL3qPTuKITaKDCShUFsW5JmB2Q-5KL-LJkaVhT_bfLh-l_PQUJMK-v8K6rBbxbdJJjoVfcaL4JfMp0Z2J5-5-5Qt2TxoUJvMInJhhvq-4PKjtCebPRiWPr9QgbjahQ7tt5W8ncFbT7l5hKpbt-q0x-jLTnhVn0M5DK0hDvI-tTBMDCV-frb-C62aKDsslvcBhcqJ-ovQT-WQqFubtLtW-5A3KvM0hR55l0bHxbeWfvpX-kIBp7thU5bQJRpaJ5nJq5nhMJmKTLVbML0qto7-P3y523i2n6vQpn2OpQ3DRoWXPIqbN7P-p5Z5mAqKl0MLPbtbb0xXj_0DjPVKgTa54cbb4o2WbCQQCnT8pcN2b5oQTJbQJrIKx_tB2bAKb3j5hRbeq06-lOUWfAkXpJvQnJjt2JxaqRCWJ5TMl5jDh3MKToDb-otexQ7bIny0hvcBn6cShnxyUjrDRLbXU6BK5vPbNcZ0l8K3l02V-bIe-t2XjQhDHRabK6aKC5bL6rJabC3ehReXU6q2bDeQN-O0lcI5mCt0f3Y3b3JepR6bftb-l0vWtv4WbbvLT7johRTWqR4OR5JjxonDh83KNLLKUQtHmT7LnbO5hvv8b6O3M72yUKmDloOW-TB5bbPLUQF5l8-sq0x0bOte-bQXH_EJ6na--oa3RTeb6rjDnCr0JQMXUI82h5y05tO3G5I0lD-2MQzsn3TbUvbbfbW-RORXx74B5vvbPOMthRnOlRKy4oTjxL1Db3Jb5_L5gTtsl5dbnboepvoX-cc3MkQyPjdJJQOBKQB0KnGbUQkeq8CQft20b0EeMtjW6LEK5r2SCKyJDDW3D; Hm_lvt_64ecd82404c51e03dc91cb9e8c025574=1619008856,1619009168,1619010040,1619010844; Hm_lpvt_64ecd82404c51e03dc91cb9e8c025574=1619010844; ab_sr=1.0.0_OTFmNmY0OWFkM2ZhNWExNzAyN2RhNmMzY2RiNjRhYzE4ZTRlZTMzZTdjOTU3ZDIwNjM2MmE1ODIzNzdiZTBjMzhkMGJjN2RmNDM2MTcxNjQ3NTg5ZjQ0Y2IzODE3ZDllMjE5ZDRhNWU0YWM4N2M5Y2M3ODY4Yzc1YzNhZGVmZjY=; __yjs_st=2_MGE3M2I5MGE3NzJjYzdmMTlkZjY1YjMzOGEyYWVmMzEwMzE4NTVjYzViZmI4ZGVlZWU3ODcxN2VlMmQzZDJkN2Q2ZTM5ZmJkNzYwZjFhNjNiY2I4NzNhNjk3NTNmNDUzZTk4N2M1MThiYjljMGZmYWI1YzNmYTk2NmM3NGFiYWNiOTlkMjdkMjdmODQ2Y2Y2YTFhYzVmYzRkOTdmNWJjZTZlMGM5YTE0YzU2NGVjNTVjMTBiMDBmYTljYTU3NWVkYzMwZDAzZGY3ZTZiMzU1ZjliYTVjYmU3NTM2OGViYjRkOWNiMDBiZTY5MjA4ZmVkYzJhYTNlMjgwZGEwMTM3NV83X2Y1Y2NhNzQy',
            'Host': 'fanyi.baidu.com',
            'Referer': 'https://www.baidu.com/link?url=-3xtHhvdU2My7OeSMOtU7P3HsYoDUvtks656aQaDDACL5sdaEszLo4kCxWD5AVqHgTgPsPsRlzOwrpNtyDtr1q&wd=&eqid=bbe5d8e5000a75d20000000660802518',
            'Upgrade-Insecure-Requests': '1',
            'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.128 Safari/537.36'
        }
        url = 'https://fanyi.baidu.com/?aldtype=16047'
        response = session.get(url, headers=headers).content.decode()
        token = ''.join(re.findall("token: '(.*?)',", response))
        return token

    def parse_sign_parm(self):
        """
        解析sign参数
        :return:
        """
        # 1.创建js代码执行环境
        js = js2py.EvalJs()
        with open('baidu_translate.js', 'r')as f:
            # 进入带运行状态
            js.execute(f.read())
        sign = js.e(self.input_str)
        # print(sign)
        return sign

    def parse_start_url_response(self, lan):
        """
        解析翻译的响应
        :param lan: 语言的种类
        :return:
        """
        en = 'en' if lan == 'zh' else 'zh'
        data = {
            'from': lan,
            'to': en,
            'query': self.input_str,
            'transtype': 'realtime',
            'simple_means_flag': '3',
            'sign': self.parse_sign_parm(),
            'token': self.parse_token_response(),
            'domain': 'common'
        }
        headers = {
            'Cookie': 'REALTIME_TRANS_SWITCH=1; FANYI_WORD_SWITCH=1; HISTORY_SWITCH=1; SOUND_PREFER_SWITCH=1; SOUND_SPD_SWITCH=1; Hm_lvt_afd111fa62852d1f37001d1f980b6800=1599288033; BIDUPSID=94ED73D41A60F5410218DED5F26813B1; PSTM=1609765617; BAIDUID=EF0BA3D46B46537F8F311C85A9C3139F:FG=1; H_WISE_SIDS=107314_110085_127969_131423_133332_144966_154214_156287_156927_162898_163568_164955_165134_165136_165329_166147_166184_166831_167069_167074_167085_167114_167295_168033_168205_168311_168388_168495_168541_168558_168565_168747_168762_168767_169132_169155_169164_169187_169217_169308_169310_169374_169661_169666_169708_169833_169873_170035_170074_170216_170252_170291_170451_170476; BDUSS=dvTm9mcEpqallQRjZPbTJmRk1lQmJqUVFaMlJqZ20yeEpZUGVBfklMdk1TM2xnRVFBQUFBJCQAAAAAAAAAAAEAAADB7szat~y12Na0t6i52QAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMy-UWDMvlFgMn; BDUSS_BFESS=dvTm9mcEpqallQRjZPbTJmRk1lQmJqUVFaMlJqZ20yeEpZUGVBfklMdk1TM2xnRVFBQUFBJCQAAAAAAAAAAAEAAADB7szat~y12Na0t6i52QAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMy-UWDMvlFgMn; __yjs_duid=1_95f905692b2840656f1f4ac42137ae721617966004006; MCITY=-158%3A; BDORZ=B490B5EBF6F3CD402E515D22BCDA1598; H_PS_PSSID=33821_31253_33848_33675_26350_33891_33811; BAIDUID_BFESS=EF0BA3D46B46537F8F311C85A9C3139F:FG=1; BCLID=6950050476890282943; BDSFRCVID=U8COJexroG38EYQeA5OHIGgggLweG7bTDYLEOwXPsp3LGJLVJeC6EG0Pts1-dEu-EHtdogKKLmOTHpKF_2uxOjjg8UtVJeC6EG0Ptf8g0M5; H_BDCLCKID_SF=tR-JoDDMJDL3qPTuKITaKDCShUFsW5JmB2Q-5KL-LJkaVhT_bfLh-l_PQUJMK-v8K6rBbxbdJJjoVfcaL4JfMp0Z2J5-5-5Qt2TxoUJvMInJhhvq-4PKjtCebPRiWPr9QgbjahQ7tt5W8ncFbT7l5hKpbt-q0x-jLTnhVn0M5DK0hDvI-tTBMDCV-frb-C62aKDsslvcBhcqJ-ovQT-WQqFubtLtW-5A3KvM0hR55l0bHxbeWfvpX-kIBp7thU5bQJRpaJ5nJq5nhMJmKTLVbML0qto7-P3y523i2n6vQpn2OpQ3DRoWXPIqbN7P-p5Z5mAqKl0MLPbtbb0xXj_0DjPVKgTa54cbb4o2WbCQQCnT8pcN2b5oQTJbQJrIKx_tB2bAKb3j5hRbeq06-lOUWfAkXpJvQnJjt2JxaqRCWJ5TMl5jDh3MKToDb-otexQ7bIny0hvcBn6cShnxyUjrDRLbXU6BK5vPbNcZ0l8K3l02V-bIe-t2XjQh-p52f6KDJJCD3D; BCLID_BFESS=6950050476890282943; BDSFRCVID_BFESS=U8COJexroG38EYQeA5OHIGgggLweG7bTDYLEOwXPsp3LGJLVJeC6EG0Pts1-dEu-EHtdogKKLmOTHpKF_2uxOjjg8UtVJeC6EG0Ptf8g0M5; H_BDCLCKID_SF_BFESS=tR-JoDDMJDL3qPTuKITaKDCShUFsW5JmB2Q-5KL-LJkaVhT_bfLh-l_PQUJMK-v8K6rBbxbdJJjoVfcaL4JfMp0Z2J5-5-5Qt2TxoUJvMInJhhvq-4PKjtCebPRiWPr9QgbjahQ7tt5W8ncFbT7l5hKpbt-q0x-jLTnhVn0M5DK0hDvI-tTBMDCV-frb-C62aKDsslvcBhcqJ-ovQT-WQqFubtLtW-5A3KvM0hR55l0bHxbeWfvpX-kIBp7thU5bQJRpaJ5nJq5nhMJmKTLVbML0qto7-P3y523i2n6vQpn2OpQ3DRoWXPIqbN7P-p5Z5mAqKl0MLPbtbb0xXj_0DjPVKgTa54cbb4o2WbCQQCnT8pcN2b5oQTJbQJrIKx_tB2bAKb3j5hRbeq06-lOUWfAkXpJvQnJjt2JxaqRCWJ5TMl5jDh3MKToDb-otexQ7bIny0hvcBn6cShnxyUjrDRLbXU6BK5vPbNcZ0l8K3l02V-bIe-t2XjQh-p52f6KDJJCD3D; Hm_lvt_64ecd82404c51e03dc91cb9e8c025574=1617967160,1617976923,1619008851,1619008856; Hm_lpvt_64ecd82404c51e03dc91cb9e8c025574=1619008856; ab_sr=1.0.0_OTc4ODhhNDZjMjAxMDI2MzIzYTAzZjkzMDM2NjkzMDgxNDU2ZWIwZDY4OGUyYzM2NTdmMzlmMTJkNmY2NmY0NDA4MzM1YzQyMmM5MTFlOGJhYzMxZjRhMjkyMzUxMjNk; __yjs_st=2_MGE3M2I5MGE3NzJjYzdmMTlkZjY1YjMzOGEyYWVmMzEwMzE4NTVjYzViZmI4ZGVlZWU3ODcxN2VlMmQzZDJkN2Q2ZTM5ZmJkNzYwZjFhNjNiY2I4NzNhNjk3NTNmNDUzZTk4N2M1MThiYjljMGZmYWI1YzNmYTk2NmM3NGFiYWNiOTlkMjdkMjdmODQ2Y2Y2YTFhYzVmYzRkOTdmNWJjZTZlMGM5YTE0YzU2NGVjNTVjMTBiMDBmYTljYTU3NWVkMzQxN2EzMjBkYWNlZDhhODMxOGUxNTVlZThlNDE2MTI4Y2Q0YzU0MjVmNjU3ZGI5ZGExODg0YjVmYThlYzAxMl83XzE3NDNkZjlj',
            'Host': 'fanyi.baidu.com',
            'Origin': 'https://fanyi.baidu.com',
            'Referer': 'https://fanyi.baidu.com/?aldtype=16047',
            'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.128 Safari/537.36',
            'X-Requested-With': 'XMLHttpRequest'
        }
        response = session.post(self.start_url, headers=headers, data=data).json()
        self.parse_data(response)

    def parse_data(self, response):
        """
        解析翻译之后的数据
        :param response:
        :return:
        """
        data = response['trans_result']['data'][0]['dst']
        print(f'翻译的结果是：\n\t{data}')


if __name__ == '__main__':
    b = BaiDuSpider()
    b.parse_lan_url_response()


"""
js请求参数逆向：
思路：通用
    1.观察数据(翻译之后的数据)所在位置(包)
    2.解析请求参数(解析语言的种类)
    3.判断参数的生成(判断参数是否动态变化 & 是否有变化的规律 & js生成)
    4.search 搜索参数名称
    5.寻找结果，每一个结果都会跳转到js代码页面， Ctrl + F 在js代码页面搜索参数名称
    6.观察搜索出来的位置，特征：请求参数会放在一起
    7.打断点观察(断点打上之后，刷新页面)，点击下一步，观察执行过程
    8.鼠标移动到函数位置，显示高亮，对高亮的js点击跳转  (注意点：前提：进入到断点模式)
    9.一半情况下，跳转之后，跳转的位置就是加密的位置(很少的情况需要二次跳转)
    10.通过第三方执行js代码
"""
